# Автоматизированные тесты конструктора виджета 3Snet

Этот репозиторий содержит автотесты для страницы конструктора embed-виджета:
https://dev.3snet.info/eventswidget/

Конструктор формирует HTML-код виджета (iframe) со списком событий, который можно встроить на внешний сайт.  
Тесты реализованы на Playwright + TypeScript и проверяют базовую (smoke) работоспособность.

---

##  Покрытие тестов (TC-01 … TC-05)

### **TC-01 — Страница доступна и загружается корректно**
Проверяем:
- страница отвечает HTTP-статусом **200**
- в `<title>` присутствует слово **3Snet**

---

### **TC-02 — Основные элементы конструктора отображаются**
Проверяется наличие UI-элементов, необходимых для работы конструктора:
- заголовок страницы (h1)
- поле ввода ширины (`input[name="width"]`)
- поле ввода высоты (`input[name="height"]`)
- кнопка «Сгенерировать превью»

Элементы должны быть видимыми пользователю.

---

### **TC-03 — Генерация кода учитывает значения width/height**
Шаги:
1. Заполнить ширину (`width`)
2. Заполнить высоту (`height`)
3. Нажать «Сгенерировать превью»

Ожидание:
- в поле с сгенерированным embed-кодом появится HTML-фрагмент
- внутри кода присутствуют атрибуты:  
  `width="X"` и `height="Y"`

Проверка выполняется с помощью регулярных выражений, чтобы переносы строк и форматирование не влияли на результат.

---

### **TC-04 — Кнопка «Скопировать код» меняет состояние**
Проверяется функциональность кнопки копирования:
- кнопка видима
- после нажатия меняет текст на «Скопировано» (или аналогичный)

Это подтверждает, что операция копирования выполнена и UI-состояние обновлено.

---

### **TC-05 — На странице отсутствуют JavaScript-ошибки**
С помощью обработчика `page.on('console')` собираются все сообщения типа `error`.

Ожидание:
- список ошибок должен быть пустым  
  (кроме заранее игнорируемого шума, например, ошибок внешних скриптов)

Тест гарантирует, что страница не содержит скрытых JS-ошибок, которые могут нарушить работу конструктора.

---

##  Запуск автотестов

Установка зависимостей:

```bash
npm install
npx playwright install --with-deps
```

Запуск тестов:
```bash
npm test
```
Открытие HTML-отчёта:
```bash
npm run test:report
```
